# 17 数据库物理存储

FAT- 文件分配表



- 定长记录还是变长记录（靠分隔符区分开始与结束
- 记录是非跨块存储，还是跨块存储（靠指针连接
  - 非跨块：浪费一些空间，磁盘块间无关联可并行
  - 跨块：节省一些空间，磁盘块间有关联需串行

## 数据库-表所占磁盘块的分配方法

- 连续分配
- 链接分配
- 按簇分配
- 索引分配

## 文件组织、存取方法

### 文件组织

- 无序记录文件（堆文件

  - 更新效率高，检索效率低

  - 频繁删赠会造成浪费，**因此需要数据库重组**，数据库重组(Reorganization)是通过**移走被删除的记录使有效记录连续存放**，从而**回收那些由删除记录而产生的未利用空间**

- 有序记录文件（排序文件

  - 检索效率高，更新效率低

  - 用于排序的属性通常称为排序字段，通常排序字段使用**主码**，所以主码又称排序码
  - 改进：一个主文件（排好序）+ 一个溢出文件（不排序），也需要周期性进行**数据库重组**，将溢出文件合并到主文件中，并恢复主文件中的记录顺序。

- 散列文件

  - 散列函数计算存放的位置（桶号），检索效率和更新效率都有提高

  - 用于进行散列函数计算的属性通常称为散列字段(Hashfield)，散列字 段通常也采用关系中的主码，所以又称散列码(hashkey)
  - 可能有散列冲突，因此在桶内顺序检索
  - 链接法处理溢出

- 聚簇文件

  - 将具有相同或相似属性值的记录存放于连续的磁盘簇块中

  - 多表聚簇：将若干个相互关联的Table存储于一个文件中

    